---
layout: default
title: 03. EC2 - associate level
parent: aws
---
# 03. EC2 - associate level
---

공용 ip - 인터넷 전역에 액세스
사설 ip - 사설 네트우크 내에서만 액세스

공용 ip는 전체 웹에서 유일한 것
ip로 지리적 위치를 찾을 수 있다.

사설 ip는 오직 사설 네트워크 안에서만 식별 될 수 있다.
따라서 사설 네트워크 안에서만 유일

탄력적 ip - ec2인스턴스를 시작하고 중지할때 공용 ip를 바꿀 수 있다.
고정된 공용 ip를 사용하려면 탄력적 ip가 필요하다?

계정당 탄력적ip를 5개만 쓸 수 있다.

결론적으로 탄력적 ip는 사용하지 않는 것이 좋다.
-> 좋지않은 구조
대신 DNS를 할당한다.

탄련적 ip 주소를 가지고 있는데 사용하지 않으면 요금이 부과된다.


---

## 배치 그룹

ec2 인스턴스가 aws 인프라에 배치되는 방식을 제어할때 사용

- 클러스터 배치 그룹
	- 같은 하드웨어 랙, 동일 가용 영역
	- 단일 가용 영역 내에서 지연 시간이 짧은 하드웨어 설정
	- 단점
		- 하드웨어에 실패가 발생하면 모든 인스턴스에 영향
- 분산 배치 그룹
	- 모든 인스턴스가 다른 하드웨어에 분산
	- 여러 가용 영역에 걸쳐 있을 수 있다.
	- 크리티컬 애플리케이션이 있는 경우 분산 배치그룹사용
	- 단점
		- 배치 그룹당 가용 영역당  7개의 인스턴스만 가질 수 있다 (배치 그룹 규모에 제한이 있)
- 분할 배치 그룹
	- 여러 파티션에 인스턴스가 분할 되어있다.
	- 가용 영역당 최대 7개의 파티션이 있을 수 있다.
	- 각 파티션은 aws의 랙을 나타낸다.
	- 이 파티션은 가용 영역 내의 다양한 하드웨어 랙 세트에 의존한다.
	- 랙 실패로부터 보다 안전
	- 최대 수백개의 ec2 인스턴스 설정 가능
	- 빅데이터 애플리케이션에 적합
	- 메타 데이터를 통해 파티션과의 연결고리 파악

```
Q 배치그룹 설정 안하면 어케댐?

A 배치 그룹을 명시적으로 설정하지 않으면 해당 인스턴스는 기본적으로 기본 배치 그룹에 속하게 되므로 별도의 설정이 필요하지 않습니다.

기본 배치 그룹의 주요 특징과 제한사항은 다음과 같습니다

제한 없음: 기본 배치 그룹은 특정한 제한이나 규칙이 없이 EC2 인스턴스를 시작할 수 있는 그룹입니다.

가용 영역 간 분산 불가능: 기본 배치 그룹은 여러 가용 영역 간에 인스턴스를 분산시키는 것이 불가능합니다. 한 가용 영역에 속한 여러 인스턴스 간에는 분산될 수 있지만, 다른 가용 영역에 있는 인스턴스와는 분산되지 않습니다.  

미국 동부 (Northern Virginia) 리전은 여러 가용 영역 (예: us-east-1a, us-east-1b, us-east-1c 등)이 있음.

동일 하드웨어에 인스턴스 배치: 같은 기본 배치 그룹에 속한 인스턴스들은 동일한 하드웨어에 배치됩니다. 이는 성능 최적화와 관련이 있습니다.
```


---

## 탄력적 네트워크 (ENI)

eni는 ec2가 네트워크에 연결할 수 있도록 도와줌

주요 사설 IPv4 하나 이상의 보조 IPv4를 가질 수 있다

eni는 사설 및 공용 ip가 한개씩 제공된다.

eni에 하나 이상의 보안 그룹을 연결할 수 있다.

인스턴스와 독립적으로 eni를 생성하고 즉시 연결하거나
장애 조치를 위해 ec2 인스턴스에 이동시킬 수 있다.

eni는 가용영역에 바인딩 된다.

A인스턴스에 문제가 발생했을때

B인스턴스로 보조ip를 옮겨서 A인스턴스 장애 조치를 할 수 있다.

eni를 연결한 인스턴스를 "종료"하게되면 직접만든 eni는 남고 인스턴스가 실행될때 자동으로 만들어진 eni만 삭제된다

---

## Hibernate (절전모드)

ec2가 절전모드에 들어가게 되면 ram에 있던 인메모리 상태는 그대로 보존 -> 부팅이 빠르다는 말

절전 모드를 사용하면 aws의 인스턴스 상태는 stop으로 뜨지만 운영체제는 꺼진것으로 인식하지않는다.

ec2가 절전 모드에 들어가면 ebs(Elastic Block Store)볼륨에 ram의 내용이 암호회되어 덤프된다. 그리고 인스턴스가 종료되면 ram이 사라진다
인스턴스를 다시 실행시키면 ebs에서 불러와 ram에 다시 적재한다

사용 예제
- 오래 실행되는 프로세스를 갖고 있고 중지하지 않을때
- RAM 상태를 저장하고싶을떄
- 빠르게 재부팅하고싶을때

인스턴스의 최대 RAM크기는 150GB
EBS볼륨에만 저장 할 수 있으며 암호화가 되어야한다
모든 인스턴스에 사용 가능 
최대 60일까지 절전모드 가능

절전모드를 사용하면 ebs를 사용하는지 용량은 충분한지, 암호화를 사용하는지 여부를 잘 확인해야한다.

```
Q 안했으면 어쩔껀데?

비용청구 및 보안에 취약하다는듯하다
```


---
