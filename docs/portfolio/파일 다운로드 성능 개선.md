---
layout: default
title: 파일 다운로드 성능 개선
parent: portfolio
---
# 파일 다운로드 성능 개선
---

- **상황**
    - 인사 평가 결과로 PDF, Excel 파일 등의 대용량 첨부 파일이 존재. 특히 다수의 PDF 파일을 묶어놓은 zip 파일의 경우, 200명 기준 1GB 이상.
    - S3에 저장된 파일을 서버로 다운로드한 후 사용자에게 전달하는 방식으로 구현되어 있었으나, 대용량 파일을 여러 개 동시에 다운로드할 경우 성능 저하나 서버 다운이 발생할 수 있음.
    - 기존에는 모든 S3에 저장된 이미지나 파일을 백엔드 서버를 거쳐 프론트로 전달하는 구조로 되어 있었음.
    - 또한, 평가 완료 후 일정 기간이 지나면 더 이상 파일을 사용할 필요가 없었지만, 파일 관리가 어려워 쌓인 파일들이 스토리지 비용 증가를 유발함.
- **과제**
    - 성능 저하나 서버 다운 문제를 해결할 방법을 모색.
    - 대용량 파일의 경우, 백엔드 서버를 거치지 않고도 안전하게 파일을 사용자에게 전달할 수 있는 방식을 설계.
    - 이미지 및 로고 등 공개적으로 사용할 수 있는 파일과 그렇지 않은 파일을 적절하게 구분하여 효율적인 접근 방식을 구축.
    - 평가 결과 파일이 일정 기간이 지난 후 자동으로 삭제되어야 함.
- **해결**
	- 백엔드 서버의 스펙을 올려 해결할 수 있겠지만 근본적인 해결 방법이 아닌것으로 판단
    - **CloudFront**와 **Presigned URL**을 적용하여 파일 전달 방식을 개선함.
        - 사용자가 파일을 다운로드할 때 백엔드 서버를 거치지 않고 S3로부터 직접 다운로드할 수 있도록 **Presigned URL**을 발급하여 성능 문제를 해결.
        - 공개적으로 사용할 수 있는 이미지나 로고 파일은 **CloudFront**를 통해 public 경로로 설정하여, 서버에 부하를 주지 않고 자유롭게 접근할 수 있도록 개선.
        - private한 파일은 **Presigned URL**을 이용해 필요한 사용자가 일정 시간 동안만 접근 가능하도록 설정.
        - 기존 방식에서 프론트가 백엔드 서버를 거치지 않도록 개선함으로써 서버 부하를 크게 줄일 수 있었음.
		- S3의 **라이프사이클 정책**을 활용하여, 유효 기간이 지난 파일은 자동으로 삭제되도록 설정. 평가가 완료된 후 일정 기간이 지나면 사용되지 않는 파일을 자동으로 삭제하여 스토리지 비용을 절감하고 관리 효율성을 높임.
- **결과**
    - Presigned URL을 적용하여 사용자가 대용량 파일을 다운로드하는 경우에도 백엔드 서버의 성능 저하 없이 빠르고 안정적으로 파일을 전달할 수 있게 됨.
    - CloudFront를 통해 public 파일은 자유롭게 조회 가능하게 하여, 이미지, 로고 등의 정적 파일 요청 처리 속도가 향상되고 백엔드 서버 부하를 줄이는 데 성공함.
    - 이러한 개선 작업으로 서버 다운 및 성능 저하 이슈가 사라졌으며, 안정적인 파일 전달이 가능해짐.
	- 파일 관리가 간소화되었고, 서버의 리소스 사용이 줄어들어 서비스 안정성 및 성능이 향상됨.
