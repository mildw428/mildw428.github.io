---
layout: default
title: 06. 메시지와 인터페이스
parent: 오브젝트
---
# 06. 메시지와 인터페이스
---

#### 협력과 메시지

##### 클라이언트 - 서버 모델
협력은 어떤 객체가 다른 객체에게 무언가 요청할 때 시작된다.

![[Pasted image 20240529232145.png]]

##### 메시지와 메시지 전송
메시지는 객체들이 협력하기 위해 사용할 . 수있는 유일한 의사소통 수단이다. 한 객체가 다른 객체에게 도움을 요청하는 것을 메시지 전송 또는 메시지 패싱이라고 부른다. 이때 메시지를 전송하는 객체를 메시지 전송자 수신하는 객체를 메시지 수신자라고 부른다.
클라이언트 - 서버 모델 관점에서 클라이언트가 메시지 전송자 서버가 수신자로 . 볼수있다.

![[Pasted image 20240529233606.png]]

##### 메시지와 메서드
메시지를 수신했을 때 실제로 수행되는 함수 또는 프로시저를 메서드라고 부른다. 메시지와 메서드의 구분은 메시지 전송자와 메시지 수신자가 느슨하게 결합될 수있게 한다.

메시지 전송자는 자신이 어떤 메시지를 전송해야 하는지만 알면 된다. 수신자가 어떤 클래스의 인스턴스인지, 어떤 방식으로 요청을 처리하는지 몰라도 된다.

##### 퍼블릭 인터페이스와 오퍼레이션
객체가 의사소통을 위해 외부에 공개하는 메시지의 집합을 퍼블릭 인터페이스라고 부른다.

퍼블릭 인터페이스에 포함된 메시지를 오퍼레이션이라고 부른다.
오퍼레이션은 수행 가능한 어떤 행동에 대한 추상화다. 내부의 구현 코드는 제외하고 단순히 메시지와 관련된 시그니처를 가리키는 경우가 대부분이다.

![[Pasted image 20240529235301.png]]

##### 시그니처
오퍼레이션(또는 메서드)의 이름과 파라미터 목록을 합쳐 시그니처라고 부른다. 오퍼레이션은 실행 코드 없이 시그니처만 정의한 것이다. 메서드는 이 시그니처에 구현을 더한 것이다.

#### 인터페이스와 설계 품질
좋은 인터페이스는 최소한의 인터페이스와 추상적인 인터페이스라는 조건을 만족해야 한다.
- 디미터 법칙
- 묻지 말고 시켜라
- 의도를 드러내는 인터페이스
- 명령 - 쿼리 분리

디미터 법칙이란 협력하는 객체의 내부 구조에 대한 결합으로 인해 발상하는 설계 문제를 해결하기 위해 제안된 법칙이다. 요약하면 객체의 내부 구조에 강하게 결합되지 않도록 협력 경로를 제한하라는 것이다. "오직 인접한 이웃하고만 말하라"

아래 조건을 만족하는 인스턴스에만 메시지를 전송하라는 한다라고 이해해도 무방하다
- this 객체
- 메서드의 매개변수
- this의 속성
- this의 속성인 컬렉션의 요소
- 메서드 내에서 생성된 지역 객체
![[Pasted image 20240529235826.png]]
![[Pasted image 20240529235836.png]]

##### 묻지말고 시켜라
메시지 전송자는 메시지 수신자의 상태를 기반으로 결정을 내린 . 후메시지 수신자의 상태를 바꿔선 안된다.

##### 의도를 드러내는 인터페이스
메서드의 이름을 짓는 방법은 어떻게가 아니라 무엇을 하는지를 드러내는 것이다.

#### 원칙의 함정
위 법칙은 절대적인 법칙은 아니다. 잊지 말아야 하는 사실은 설계가 트레이드오프의 산물이라는 것이다.

##### 결합도와 응집도의 충돌
아니다. 모든 상황에서 맹목적으로 위임 메서드를 추가하면 같은 퍼블릭 인터페이스 안에 어울리지 않 는 오퍼레이션들이 공존하게 된다. 결과적으로 객체는 상관 없는 책임들을 한꺼번에 떠안게 되기 때문 에 결과적으로 응집도가 낮아진다.

클래스는 하나의 변경 원인만을 가져야 한다. 서로 상관없는 책임들이 함께 뭉쳐있는 클래스는 응집도 가 낮으며 작은 변경으로도 쉽게 무너질 수 있다. 따라서 디미터 법칙과 묻지 말고 시켜라 원칙을 무작 정 따르면 애플리케이션은 응집도가 낮은 객체로 넘쳐날 것이다.

#### 명령 - 쿼리 분리 원칙
어떤 절차를 묶어 호출 가능하도록 이름을 부여한 기능 모듈을 루틴이라고 부른다. 루틴은 프로시저와 함수로 구분할 수 있다.
- 프로시저는 부수 효과를 발생시킬 수 있지만 값을 반환할 수없다.
- 함수는 값을 반환할 수 있지만 부수효과를 발생시킬 수 없다.
명령과 쿼리는 객체의 인터페이스 측면에서 프로시저와 함수를 부르는 또 다른 이름이다.

- 객체의 상태를 변경하는 명령은 반환값을 가질 수 없다.
- 객체의 정보를 반환하는 쿼리는 상태를 변경할 수 없다.
